# Datasets for transonic wings

The dataset below are generated by Yunjia Yang on the HPC of Aerolab in Tsinghua University. Please contact Yunjia Yang (yyj980401@126.com) for the datasets.


**Citation:**

```text
Yang, Yunjia, Runze Li, Yufei Zhang, Lu Lu, and Haixin Chen. 2024. “Transferable Machine Learning Model for the Aerodynamic Prediction of Swept Wings.” Physics of Fluids 36 (7): 076105. https://doi.org/10.1063/5.0213830.
```

## B-1. Wings / Kink wings with DPW-W1 profile

This dataset contains two parts, the single-sigment simple wings and two-sigment "kink" wings. This dataset is mainly to study the influence wing planform parameters on model training, so **the sectional airfoil of wings are fixed** to be the Wing I in the AIAA Darg Prediction Workshop III (DPW3). The maximum relative thickness and tail relative thickness are 0.135 and 0.0004, respectively. There are 846 simple wings and 164 kink wings.

Their operating conditions (incl. Angle of Attack and freestream Mach number) also vary.

The dataset has been used in:

- Yang, Yunjia, Runze Li, Yufei Zhang, Lu Lu, and Haixin Chen*. 2024. “Transferable Machine Learning Model for the Aerodynamic Prediction of Swept Wings.” Physics of Fluids 36 (7): 076105. https://doi.org/10.1063/5.0213830.


### Sampling

#### Geometries of simple wings

The single-segment swept wings are wings with the simplest planform geometries. A sketch diagram of the frontal, profile, and top views of a simple wing is depicted below. 

![alt text](_static/images/datasets/simplewing1.png)

Its geometry is generated by linearly extruding the wing surface between the two control sectional airfoils on the tip and root. 

Five planform geometry parameters are used to describe the wing: the tapper ratio ($TR$), aspect ratio ($AR$), leading-edge sweep angle ($\Lambda_\text{LE}$), leading-edge dihedral angle ($\Gamma_\text{LE}$), and tip-to-root twist angle ($\alpha_\text{twist}$). The are defined as:

$$
TR = \frac{c_\text{tip}}{c_\text{root}}\\[10pt]
AR = \frac{b_{1/2}^2}{2S_{1/2}}
$$

Acting as the source domain of the transfer learning framework, the planform parameters of the wings in the simple wing dataset are sampled over a wide range of possible values as shown in Table. 
|Parameter	|Symbol	|lower bound	|upper bound|
|-|-|-|-|
|sweep angle	|$\Lambda_\text{LE}$	|0°	|35°|
|dihedral angle	|$\Gamma_\text{LE}$	|0°	|3°|
|aspect ratio	|$AR$	|6	|10|
|tapper ratio	|$TR$	|0.2	|1.0|
|twist angle	|$\alpha_\text{twist}$	|0°	|-6°|

The straight wing that is without sweep, dihedral, tapper, and twist is used for one side of the boundary, while the other side of the boundary is determined by experience according to the typical values such as the values of the DPW-W1. 

![alt text](_static/images/datasets/simplewingall.png)
 

#### Geometries of the kink wings
In engineering applications, it is difficult for a single-segment wing to fulfill its aerodynamic and structural needs under multiple operating conditions, so a wing with a kink is always adopted as the planform geometry. The figure below shows the top view of a kink wing that has three control sectional airfoils on the tip, root, and kink. The kink wing can be seen as a concatenation of two simple wings that share the same leading-edge sweep and dihedral angle but have different tapper ratios and twist angles. 

![alt text](_static/images/datasets/kinkwing1.png)


The tapper ratios for the inner and outer segments are defined by $c_\text{kink}/c_\text{root}$ and $c_\text{tip}/c_\text{kink}$, and their twist angles are similarly defined by kink-to-root and tip-to-kink. $\eta_k$ is introduced to describe the spanwise location of the kink.
 
The kink wings are the target domain in the proposed transfer learning framework, so the ranges of the planform parameters in the dataset are decided based on typical values for commercial airliner’s wings. 

|Parameter	|Symbol	|lower bound	|upper bound|
|-|-|-|-|
|sweep angle	|$\Lambda_\text{LE}$	|25°	|35°|
|dihedral angle	|$\Gamma_\text{LE}$	|2°	|2°|
|aspect ratio	|$AR$	|7	|9|
|kink position	|$\eta_k$	|0.3	|0.4|
|tapper ratio of the inner segment	|$TR_\text{in}$	|0.5	|0.7|
|tapper ratio of the outer segment	|$TR_\text{out}$	|0.4	|0.6|
|twist angle of the inner segment	|$\alpha_\text{twist,in}$	|-2°	|-4°|
|twist angle of the outer segment	|$\alpha_\text{twist,out}$	|-2°	|-5°|
 
![alt text](_static/images/datasets/kinkwingall.png)

### Grid 

Grids were generated with `CGrid`.
- Sectional airfoil grid: 
    - Structured C-type grid solved with elliptic equation to ensure grid orthogonality
    - Grid size is 401×81 in the circumferential direction (i-direction) and wall-normal direction (j-direction). 
    - The grid contains 321 cells on the airfoil surface. The far-field location is 80 chords away from the airfoil. The height of the first mesh layer is 2.7e-6 chord.
    ![alt text](_static/images/datasets/wingsectionalgrid.png)
- Wing grid:
    - 


### CFD

- Computed using the Reynolds Average Navier–Stokes (RANS) solver CFL3D. 
    - finite volume method
    - MUSCL scheme, ROE scheme
    - Gauss-Seidel algorithm
- Turbulance model: shear stress transport (SST) model

### Data format

The infomation of flowfield data are below:

| array size | (16478, 6, 331, 75) |
|-|-|
| channel name | `x`,`y`, `p`, `T`, `u`, `v` *|
| flowfield size | 331 x 75 **|

>  \* all flowfield variables are NON-DIMENSIONAL with freestream condition (in CFL3D.prt way); values are on mesh points.
    $$
    p = \frac{\tilde p}{\tilde p_\infty}, T = \frac{\tilde T}{\tilde T_\infty}, u = \frac{\tilde u}{\tilde u_\infty}, v = \frac{\tilde v}{\tilde v_\infty}, 
    $$
    where ~ stands for dimensional values

> \*\* The index of the flowfield is shown below
    ![Alt text](_static/images/datasets/dataset1fig.png)

### Index format

The infomation of index data are below:

| array size | (16478, 10) |
|-|-|
| channel 0  |  airfoil index  |
| channel 1  |  condition index  |
| channel 2  |  ref index for the airfoil|
| channel 3  |  aoa |
| channel 4  |  ref aoa  |
| channel 5  |    ref ma  |
| channel 6  |  ref cl  |
| channel 7  |  cl  |
| channel 8  |  cd  |
| channel 9  |  running idx |